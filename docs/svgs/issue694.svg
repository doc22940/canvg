<svg xmlns="http://www.w3.org/2000/svg" width="620" height="520" viewBox="0 0 620 520" style="overflow:hidden;display:block"><defs><rect id="outer" width="80" height="80" fill="red"/><clipPath><defs><rect id="dumb" width="80" height="80" fill="gold"/></defs></clipPath><rect id="duplicate" width="80" height="80" fill="#00f"/><linearGradient id="gradient"><stop offset="0" stop-color="gold"/><stop offset="1" stop-color="green"/></linearGradient><g id="nested"><defs><linearGradient id="nestedGradient"><stop offset="0" stop-color="red"/><stop offset="1" stop-color="green"/></linearGradient></defs><rect width="80" height="80" fill="url(#nestedGradient)"/></g><rect id="sameLevel" width="80" height="80" fill="url(#gradient)"/><pattern id="pattern" width="80" height="80" patternUnits="userSpaceOnUse"><use href="#outer"/></pattern></defs><g><svg xmlns="http://www.w3.org/2000/svg" width="200" height="600" viewBox="0 0 200 600"><defs><rect id="inner" width="80" height="80" fill="green"/><rect id="duplicate" width="80" height="80" fill="gray"/><linearGradient id="gradient"><stop offset="0" stop-color="gray"/><stop offset="1" stop-color="green"/></linearGradient></defs><use href="#outer" transform="translate(20, 20)"/><use href="#inner" transform="translate(20, 120)"/><use href="#dumb" transform="translate(20, 220)"/><use href="#duplicate" transform="translate(20, 320)"/><rect width="80" height="80" fill="url(#gradient)" transform="translate(20, 420)"/></svg><use href="#outer" transform="translate(120, 20)"/><use href="#inner" transform="translate(120, 120)"/><use href="#dumb" transform="translate(120, 220)"/><use href="#duplicate" transform="translate(120, 320)"/><rect width="80" height="80" fill="url(#gradient)" transform="translate(120, 420)"/><use href="#nested" transform="translate(220, 20)"/><use href="#sameLevel" transform="translate(220, 120)"/><rect width="80" height="80" fill="url(#pattern)" transform="translate(220, 220)"/></g><line x1="310" x2="310" y1="20" y2="500" stroke="#000" stroke-width="2"/><g transform="translate(300, 0)"><use href="#outer-forward" transform="translate(120, 20)"/><use href="#inner-forward" transform="translate(120, 120)"/><use href="#dumb-forward" transform="translate(120, 220)"/><use href="#duplicate-forward" transform="translate(120, 320)"/><rect width="80" height="80" fill="url(#gradient-forward)" transform="translate(120, 420)"/><use href="#nested-forward" transform="translate(220, 20)"/><use href="#sameLevel-forward" transform="translate(220, 120)"/><rect width="80" height="80" fill="url(#pattern-forward)" transform="translate(220, 220)"/><svg xmlns="http://www.w3.org/2000/svg" width="200" height="600" viewBox="0 0 200 600"><use href="#outer-forward" transform="translate(20, 20)"/><use href="#inner-forward" transform="translate(20, 120)"/><use href="#dumb-forward" transform="translate(20, 220)"/><use href="#duplicate-forward" transform="translate(20, 320)"/><rect width="80" height="80" fill="url(#gradient-forward)" transform="translate(20, 420)"/><defs><rect id="inner-forward" width="80" height="80" fill="green"/><rect id="duplicate-forward" width="80" height="80" fill="#00f"/><linearGradient id="gradient-forward"><stop offset="0" stop-color="gold"/><stop offset="1" stop-color="green"/></linearGradient></defs></svg></g><defs><rect id="outer-forward" width="80" height="80" fill="red"/><clipPath><defs><rect id="dumb-forward" width="80" height="80" fill="gold"/></defs></clipPath><rect id="duplicate-forward" width="80" height="80" fill="gray"/><linearGradient id="gradient-forward"><stop offset="0" stop-color="gray"/><stop offset="1" stop-color="green"/></linearGradient><g id="nested-forward"><defs><linearGradient id="nestedGradient-forward"><stop offset="0" stop-color="red"/><stop offset="1" stop-color="green"/></linearGradient></defs><rect width="80" height="80" fill="url(#nestedGradient)"/></g><rect id="sameLevel-forward" width="80" height="80" fill="url(#gradient)"/><pattern id="pattern-forward" width="80" height="80" patternUnits="userSpaceOnUse"><use href="#outer"/></pattern></defs></svg>